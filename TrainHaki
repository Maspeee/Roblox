local RStorage = game:GetService("ReplicatedStorage")
local PlrS = game:GetService("Players")
local TweenS = game:GetService("TweenService")

local team = "Marines"
local enemyCF = CFrame.new(-1993.4, 36.9, -10682.9)
local speed = 250

local serverHop = loadstring(game:HttpGet("https://raw.githubusercontent.com/Maspeee/Roblox/Shared/ServerHop"))()
local link = "https://raw.githubusercontent.com/Maspeee/Roblox/BloxFruits/TrainHaki"

local commE = RStorage:WaitForChild("Remotes").CommE
local commF_ = RStorage:WaitForChild("Remotes").CommF_

local plr = PlrS.LocalPlayer
local char

local locked = false
local done = false

function tweenChar(goal)
    local dinst = (goal -char.PrimaryPart.Position).Magnitude
    local t = dinst /speed

    local info = TweenInfo.new(t, Enum.EasingStyle.Linear, Enum.EasingDirection.InOut)
    local prop = {CFrame = enemyCF}
    local tween = TweenS:Create(char.PrimaryPart, info, prop)

    char.PrimaryPart.Anchored = true
    tween:Play()
    tween.Completed:Wait()
    char.PrimaryPart.Anchored = false
end

function lockPos(cf, deferred)
    if not deferred then
        task.spawn(lockPos, cf, true)
        return
    end

    locked = true
    while locked do
        char:PivotTo(cf)
        task.wait()
    end
end

function teleport()
    if done then return end
    
    done = true
    serverHop(link)
end

function start()
    if plr:WaitForChild("VisionRadius").Value > 4999 then
        plr:Kick("Max level reached")
        return
    end

    commF_:InvokeServer("SetTeam", team)
    char = plr.Character
    commE:FireServer("Ken", true)

    tweenChar(enemyCF.Position)
    lockPos(char.PrimaryPart.CFrame)

    task.delay(20, teleport)
    char.Humanoid.HealthChanged:Wait()
    teleport()
end

start()
