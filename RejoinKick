--	Services  ------------------------------------
--------------------------------------------------

local TpS = game:GetService("TeleportService")
local Core = game:GetService("CoreGui")

--	Variables  -----------------------------------
--------------------------------------------------

local placeId = game.PlaceId
local jobId = game.JobId

--	Main  ----------------------------------------
--------------------------------------------------

function onKick(obj, queueLink)
    if obj.Name ~= "ErrorPrompt" then return end
    print("Rejoining")

    if queueLink then queue_on_teleport(game:HttpGet(queueLink)) end
    pcall(TpS.TeleportToPlaceInstance, TpS, placeId, jobId)

    TpS.TeleportInitFailed:Wait()
    onKick(obj, queueLink)
end

function rejoinKickCalled(queueLink)
    Core.RobloxPromptGui.promptOverlay.ChildAdded:Connect(function(obj)
        onKick(obj, queueLink)
    end)
end

--------------------------------------------------

return rejoinKickCalled
